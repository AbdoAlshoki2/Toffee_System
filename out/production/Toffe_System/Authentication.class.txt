import java.util.*;
import java.util.regex.*;
import java.util.ArrayList;

public class Authentication {
    SystemData SD;
    Authentication (SystemData SD){
        this.SD = SD;
    }
    private boolean isFound(String username, String password){
        ArrayList<Customer> allCustomers;
        allCustomers = SD.getCustomers();
        boolean found =false;
        for(Customer c: allCustomers){
            String UName = c.getUserName(), Password = c.getPassword();
            if(UName.equals(username)&&Password.equals(password)){
                found = true;
                break;
            }
        }
        return found;
    }
     public void Login(){
        Scanner sc = new Scanner(System.in); 
        System.out.println("Enter Username: ");
        String username = sc.nextLine();
        System.out.println("Enter password: ");
        String password = sc.nextLine();
        while(!isFound(username,password)){
            System.out.println("Icorrect Username or password ");
            System.out.println("Enter Username: ");
            username = sc.nextLine();
            System.out.println("Enter password: ");
            password = sc.nextLine();
        }
        System.out.println("Login successful. Welcome!");
    }
     public void Regester(){
        Scanner sc = new Scanner(System.in); 
        System.out.println("Enter Username: ");
        String username = sc.nextLine();
        System.out.println("Enter your address: ");
        String address = sc.nextLine();
        System.out.println("Enter your email: ");
        String email = sc.nextLine();
        while(!validInputs(2,email)){
            System.out.println("Please enter a valid email: ");
            email = sc.nextLine();
        }
        System.out.println("Enter your password: ");
        String password = sc.nextLine();
        System.out.println("Enter your phone number: ");
        String telephone = sc.nextLine();
        SD.AddCustomer(new Customer(username,address,email,password,telephone,0));
        System.out.println("registered successfully");
    }
    private boolean validInputs(int type,String data){
        boolean valid = true;
        switch(type) {
            case 1:{
                
                 break;
            }
            case 2:{
                String patternString = "^[A-Za-z0-9._%+-]+@gmail\\.com$";
                Pattern pattern = Pattern.compile(patternString);
                Matcher matcher = pattern.matcher(data);

                if (!matcher.matches()) {
                   valid = false;
                }
                break;
            }
        }
        return valid;
        
    }
    
}
